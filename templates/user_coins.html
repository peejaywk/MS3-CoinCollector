{% extends "base.html" %}
{% block content %}

{% if not session.user %}
<h1>Welcome to Coin Collector</h1>
<p>Coin Collector is a website created for people who enjoy collecting coins that are in everyday
    circulation within the UK. Coin Collector is a place to easily record coins you have found and
    to see what coins are missing from your collection.
</p>
<p>To get started please register to create an account. If already registered the please login to
    see your collection.
</p>
<p>Good luck collecting those coins!</p>

<a class="waves-effect waves-light btn-large" href="{{ url_for('register') }}">Register</a>
<a class="waves-effect waves-light btn-large" href="{{ url_for('login') }}">Login</a>

{% else %}
{% if coins|length > 0 %}
<h4>Coin Collection</h4>

<ul class="collapsible">
    {% for coin in coins %}
    <li>
        <div class="collapsible-header">
            <p class="td-text">{{ coin.coin_data.year }} - {{ coin.coin_data.denomination }} -
                {{ coin.coin_data.issue }}</p>
        </div>
        <div class="collapsible-body">
            <table>
                <tbody>
                    <tr>
                        <td rowspan="4" class="coin-table-img"><img src="{{ coin.coin_data.reverse_image }}" alt=""
                                class="square coin-image">
                        </td>
                        <td>
                            <p class="td-text">Denomination:</p>
                        </td>
                        <td>
                            <p class="td-text">{{ coin.coin_data.denomination }}</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p class="td-text">Year:</p>
                        </td>
                        <td>
                            <p class="td-text">{{ coin.coin_data.year }} </p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p class="td-text">Issue:</p>
                        </td>
                        <td>
                            <p class="td-text">{{ coin.coin_data.issue }} </p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <p class="td-text">Description:</p>
                        </td>
                        <td>
                            <p class="td-text">{{ coin.coin_data.description }} </p>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div>
                <a href="#edit_{{coin._id}}" class="waves-effect waves-light btn-small green lighten-1 modal-trigger">Edit</a>
                <a href="#delete_{{coin._id}}" class="waves-effect waves-light btn-small red lighten-1 modal-trigger">Delete</a>
            </div>
        </div>

        <!-- Delete Modal Structure -->
        <div id="delete_{{coin._id}}" class="modal">
            <div class="modal-content">
                <h5>{{ coin.coin_data.year }} - {{ coin.coin_data.denomination }} -
                    {{ coin.coin_data.issue }}</h5>
                <img class="activator coin-image" src="{{ coin.coin_data.reverse_image }}">
                <p>Please confirm deletion of the above coin from your collection.</p>
            </div>

            <div class="modal-footer">
                <a href="{{ url_for('delete_user_coin', user_coin_id=coin._id)}}"
                    class="modal-close waves-effect waves-green btn-flat left">Confirm</a>
                <a href="#!" class="modal-close waves-effect waves-green btn-flat left">Cancel</a>
            </div>
        </div>

        <!-- Edit Modal Structure -->
        <div id="edit_{{coin._id}}" class="modal">
            <div class="modal-content">
                <h5>{{ coin.coin_data.year }} - {{ coin.coin_data.denomination }} -
                    {{ coin.coin_data.issue }}</h5>
                <img class="activator coin-image" src="{{ coin.coin_data.reverse_image }}">
                <p>Please confirm deletion of the above coin from your collection.</p>
            </div>

            <div class="modal-footer">
                <!-- <a href="{{ url_for('delete_user_coin', user_coin_id=coin._id)}}"
                    class="modal-close waves-effect waves-green btn-flat left">Confirm</a> -->
                <a href="#!" class="modal-close waves-effect waves-green btn-flat left">Cancel</a>
            </div>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<div class="row"></div>
<div class="col s12">
    <h4>Your Collection</h4>
    <p>You currently have no coins in your collection. To start collecting click 'Coin List' in the menu above or click
        the button below.</p>

</div>
<div class="col s12">
    <a href="{{ url_for('coin_list') }}" class="secondary-content btn-small green lighten-1 left">Add Coin</a>
</div>
</div>
{% endif %}
{% endif %}
{% endblock %}